<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Quote </title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/MainLogin.css">
    
           <!--      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>  -->
    <script src="assets/jquery-3.2.1.min.js"></script>

<!--      <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script> -->
 <script src="assets/jquery-ui-1.11.1/jquery-1.11.1.min.js"></script>
<!-- <script src="http://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>  -->
<script src="assets/jquery-ui-1.11.1/jquery-ui.min.js"></script>
<!--<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />   -->
     <link rel="stylesheet" href="assets/jquery-ui-1.11.1/jquery-ui.css" />
   
    
  
</head>

<body id="main_body">
  
   
   
          <div id="headerDiv"></div>
 
   
    <div class="imagebanner">
  <img src="assets/img/lpv.jpg" alt="Notebook" style="width:100%;">
  <div class="content">
    <h1 id="custInfo">Welcome To Block Insurance.</h1>
    <p id="PolicyIntroCustName">Policy Details.</p>
  </div>
</div>
  
    <button class="buttonLink" onclick="goBack()" style="margin-left:900px;margin-top:30px;">Go Back</button>
  
    <div class="container-fluid" id="main_container" >
        <div class="row">
        
        <h2 style="color:black;margin-top:10px;text-align:left;margin-left:250px;">Personal Information</h2>
         <table style="margin-top:20px;width:700px;margin-left:250px;"class="table table-bordered">
         
         <tr>
         <td style="font-weight:bold;color:black;">Loan ID</td>
         <td id="loanId" style="color:black;"></td>
         
          <td style="font-weight:bold;color:black;">Term</td>
         <td id="term" style="color:black;"></td>
         
         
          <td style="font-weight:bold;color:black;">APR</td>
         <td id="apr" style="color:black;"></td>
         </tr>
         
         
            <tr>
         <td style="font-weight:bold;color:black;">Name</td>
         <td id="name" style="color:black;"></td>
         
          <td style="font-weight:bold;color:black;">Email</td>
         <td id="email" style="color:black;"></td>
         
         
          <td style="font-weight:bold;color:black;">Request ID</td>
         <td id="policyId" style="color:black;"></td>
         </tr>
         </table>
            
   <div class="col-lg-6 col-md-12 card" id="apply_loan_column" style="margin-top:20px;margin-left:390px;width:450px;">
         <div class="titleLanding" id="titleText" style="margin-top:10px;">Log In As Admin</div>
   <!--<form role="form"   method="POST" action="ApprovePropertInfo" id="form1" >-->
   <form role="form"   method="POST" action="" id="form1" >
           
           
            
     <br>
     <br>
       
            
             <p  style="color:black;margin-left:2px;text-align:left;">Property Type :</p>
<input type="text" class="form-control" id="propertyType" name="propertyType" style="border:1px solid #ccc;border-radius:4px;box-sizing:border-box;color:black;" required>
<br>

<p  style="color:black;margin-left:2px;text-align:left;">Property Address :</p>
<input type="text" class="form-control" id="propertyAddress" name="propertyAddress" style="border:1px solid #ccc;border-radius:4px;box-sizing:border-box;color:black;" required>
<br>

<p  style="color:black;margin-left:2px;text-align:left;">Purchase Price :</p>
<input type="text" class="form-control" id="purchasePrice" name="purchasePrice" style="border:1px solid #ccc;border-radius:4px;box-sizing:border-box;color:black;" required>
<br>

<p  style="color:black;margin-left:2px;text-align:left;">Down Payment :</p>
<input type="text" class="form-control" id="downpayment" name="downpayment" style="border:1px solid #ccc;border-radius:4px;box-sizing:border-box;color:black;" required>
<br>


<p  style="color:black;margin-left:2px;text-align:left;">Property Document :
 <a href="#" id="btnShow" style="margin-left:130px;">View Document</a>
</p>

<input type="text" class="form-control" id="loanIds" name="loanIds">
<input type="text" class="form-control" id="policyIds" name="policyIds">
<input type="submit" value="Approve Quote" id="quote">
          
           </form>
         
          
          
 
        
 
    
              
              
                </div>
            
             
            
    </div>
    </div>
    
     <div id="dialog" style="display: none;width:700px;" >
    
        <iframe id="frame" style="width:600px;height:400px;"></iframe>
        

</div>
     
    
   
</body>
 <script src="assets/js/Properties.js"></script>
 <script src="assets/js/ApprovePropertInfo.js"></script>


  <script>
$(document).ready(function(){
	
	
	$("#headerDiv").load("Header.html");
	
	 $("#inc").hide();
	// $("#policyId").hide();
	$("#policyIds").hide();
	$("#loanIds").hide();
	 
	 
	 
	 //var bank=localStorage.getItem("banksName");
        //$("#main_footer").hide();
       // document.getElementById("jumbotron_header").innerHTML = "Welcome To "+"ABC Bank";
     



var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};

var insuranceAddress = getUrlParameter('insuranceAddress');
var policyId = getUrlParameter('policyId');

var name = getUrlParameter('name');

var Name4=name.charAt(0).toUpperCase() + name.slice(1);
 var replaced = Name4.split('_').join(' ');


document.getElementById("PolicyIntroCustName").innerHTML = "Updated Request Details For Customer :"+replaced;

document.getElementById("titleText").innerHTML = "Property Details For Request  ID: "+policyId;

$("#propertyType").prop("readonly", true);
$("#propertyAddress").prop("readonly", true);
$("#purchasePrice").prop("readonly", true);

$("#downpayment").prop("readonly", true);





$("#policyId").val(policyId);

$("#policyIds").val(policyId);

$.get("/getCustomerPolicy?policyId="+policyId+"&insuranceAddress="+insuranceAddress, function(response){
	var loanId=response.message.loanId;
	document.getElementById("loanId").innerHTML = response.message.loanId;
	$("#loanIds").val(loanId);

//	$("#").val(response.message.loanId);
	var term=response.message.termOfPolicy ;
	//term=term.replace("_", " ");
	$("#termOfPolicy").val(term +" years");
	$("#apr").val(response.message.apr);
	 document.getElementById("term").innerHTML = term +" years";
	 
	 document.getElementById("apr").innerHTML = response.message.apr;
	 
	
	var name=response.message.name;
	name=name.replace("_", " ");
	$("#propertyType").val(response.message.propertyType);
	$("#propertyAddress").val(response.message.propertyAddress);
	$("#purchasePrice").val("$ "+response.message.purchasePrice);
	$("#downpayment").val("$ "+response.message.downpayment);
	
	
	 document.getElementById("name").innerHTML =replaced;
	 document.getElementById("email").innerHTML = response.message.emailId;
	 document.getElementById("policyId").innerHTML = policyId;
	 
	 
	 var ipAdd=localStorage.getItem("ipAdd");
	 var port=localStorage.getItem("port");
	 //alert(port);

	 //$.get("http://"+ipAdd+":"+port+"/getCustomerPolicy?policyId="+policyId+"&insuranceAddress="+insuranceAddress, function(response){
	 //$.get("http://"+ipAdd+":"+port+"/getCustomerPolicy?policyId="+policyId+"&insuranceAddress="+insuranceAddress, function(response){
	 
	
	 
	 $('#btnShow').click(function(){
			$.get("/getDocumentHashByLoanId?loanId="+loanId, function(response){
				  // alert(JSON.stringify(response.people));
				//alert(JSON.stringify(response));
				
				 
				// document.getElementById("propertyAddress").innerHTML = response.message.propertyAddress;
				
			
		    $("#dialog").dialog({
		       
		            maxWidth:600,
		            maxHeight: 450,
		            width: 600,
		            height: 450,
		            modal: true
		            
		        });
//		    $("#frame").attr("src", "http://"+ipAdd+":8090/ipfs/"+response.message.taxReturnsHash);

		
            $.get("/ipfs?fileHash=" + response.message.taxReturnsHash, function (response) {
				$("#frame").attr("src", response.ipfsUrl);
			});

		   // $("#propertyDoc").val(response.message.taxReturnsHash);
		}); 
		});
	
	
});


});




        


</script>



<script>
function MyFunction(){
	$("#nav_bar2").show();
}

</script>

<script>
function goBack() {
    window.history.back();
}
</script>


</html>
