<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Customer Request </title>
   
 
       
     
     
     <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
  <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/css/MainLogin.css">
<link rel="stylesheet" href="https://code.jquery.com/ui/1.11.1/themes/smoothness/jquery-ui.css" />
    <!--  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>  -->
<script src="assets/jquery-3.2.1.min.js"></script>
<!--      <script src="http://code.jquery.com/jquery-1.11.1.min.js"></script>  -->
 <script src="assets/jquery-ui-1.11.1/jquery-1.11.1.min.js"></script>
<!-- <script src="http://code.jquery.com/ui/1.11.1/jquery-ui.min.js"></script>  -->
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/jquery-ui-1.11.1/jquery-ui.min.js"></script>

      <link rel="stylesheet" href="assets/jquery-ui-1.11.1/jquery-ui.css" />
  <!-- <link rel="stylesheet" href="http://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">  -->
    <link rel="stylesheet" href="assets/DataTables/datatables.min.css">
<!--<script type="text/javascript" src="http://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script> -->
     
<script type="text/javascript" src="assets/DataTables/datatables.min.js"></script>


      
    
  
   
</head>

<body id="main_body">
  

    
         <div id="headerDiv"></div>
    
     
    <div class="imagebanner">
  <img src="assets/img/lpv.jpg" alt="Notebook" style="width:100%;">
  <div class="content">
    <h1 id="custInfo">Welcome To Block Insurance.</h1>
    <p>All Requests For Block Insurance.</p>
  </div>
</div>
  
  

    <!--  
    Second Section -->
    
              <button class="buttonLink" onclick="goBack()" style="margin-left:940px;margin-top:40px;">Go Back</button>
    
     <div class="container-fluid" id="main_container" style="margin-top:10px;width:850px;">
        

 
          <h3 style="color:black;text-align:left;margin-left:20px;">Current Status</h3>
 <table class="table table-bordered" style="color:black; margin-top:20px;width:780px;margin-left:20px;" id="infoTable2">
   
  
      <tr>
        <td>Loan Status</td>
        <td id="loanStatus" style="font-weight:bold;">Approve Customer Request</td>
        <td>Current Action</td>
        <td id="currentAction" style="font-weight:bold;"> Pending Approval</td>
        
       
        
        
       
      </tr>
      
      </table>
      
                      <button class="button" style="width:800px;margin-top:30px;"id="InterestDetails">Premium Details</button>
      
 
  
    <!--<form  id='uploadForm3' action='ApproveCustomerQuote' method='post'>-->
    <form  id='uploadForm3' action='' method='post'>

   <table class="table table-bordered" style="color:black; margin-top:20px;width:780px;margin-left:20px;" id="infoTable">
    <tr>
    <td >
    Loan Amount
    </td>
    <td id="loanValue" style="font-weight:bold;">
    </td>
      <td>
    Down Payment
    </td>
    <td id="loanDownPaymentValue" style="font-weight:bold;">
    </td>
    </tr>
    
    <tr>
    
    <td >
    Interest Rate
    </td>
    <td id="interestRate" style="font-weight:bold;">
    <input type="text" placeholder="Enter Interest Rate" name="rate" id="rate">
    </td>
      <td>
    Premium Payment
    </td>
    <td id="premium" style="font-weight:bold;">
     <input type="text" placeholder="Enter Premium Amount" name="premiumAmount" id="premiumAmount">
    </td>
    </tr>
  
     
      </table>   
      
          <h3 style="color:black;text-align:left;margin-left:20px;margin-top:40px;">Loan Details Verified By ABC Bank</h3>
          
          
  <table class="table table-bordered" style="color:black; margin-top:20px;width:780px;margin-left:20px;" id="infoTables">
   
  
      <tr>
        <td>Loan ID</td>
        <td id="loanId" style="font-weight:bold;"></td>
        <td>Loan Purpose</td>
        <td id="loanPurpose" style="font-weight:bold;"></td>
        
        <td>Loan Type</td>
        <td id="loanType" style="font-weight:bold;"></td>
        
        
        
       
      </tr>
      
      <tr>
        <td>Interest Type</td>
        <td id="interestType" style="font-weight:bold;"></td>
        <td>Loan Term</td>
        <td id="loanTerm" style="font-weight:bold;"></td>
        
        <td>Purchase Price</td>
        <td id="purchasePrice" style="font-weight:bold;"></td>
      
      </tr>
     
      <tr>
      
         <td>Down Payment</td>
        <td id="downPayment" style="font-weight:bold;"></td>
        <td>Property Type</td>
        <td id="propertyType" style="font-weight:bold;"></td>
        
        <td>Property Address</td>
        <td id="propertyAddress" style="font-weight:bold;"></td>
       
      </tr>
   
  </table>
  
  
            <h3 style="color:black;text-align:left;margin-left:20px;margin-top:40px;">Documents Uploaded For Loan</h3>
  
  
     <table id="tbId" style="color:black;margin-top:20px;width:780px;margin-left:20px;" class="table table-bordered">
     <th>SNo.</th>
     <th>Name Of Document</th>
     <th>Tag</th>
     <th>File</th>
     
   

             
            
     <tr>
     <td>1</td>
     <td>SSN </td>
      <td>SSN</td>
       <td><a href="#" id="btnShow">View Document</a></td>
      

     </tr>
     
      <tr>
     <td>2</td>
     <td>Passport </td>
      <td>Passport</td>
       <td><a href="#" id="btnShow2">View Document</a></td>
     </tr>
     
       <tr>
     <td>3</td>
     <td>Tax Document</td>
      <td>Tax</td>
       <td><a href="#" id="btnShow3">View Document</a></td>
      

     </tr>
     
      <tr>
     <td>4</td>
     <td>Salary </td>
      <td>Salary Document</td>
       <td><a href="#" id="btnShow4">View Document</a></td>
     </tr>
     
     
  
     
  
     
      </table>   
          

 <input type="text" name="loanIds" id="loanIds" />
          <input type='button' class="button" value='Send Quote To Customer' style="width:800px;" id="button7"  />
  
                   <button class="buttonReject" type="button" >Reject </button>
         
    </form>  
 
 
    </div>
    
    <div id="dialog" style="display: none;width:700px;" >
    
        <iframe id="frame" style="width:600px;height:400px;"></iframe>
        

</div>

<div id="dialog2" style="display: none;width:700px;" >
    
      
        
         <iframe id="frame2" style="width:600px;height:400px;"></iframe>

</div>

<div id="dialog3" style="display: none;width:700px;" >
    
      
        
         <iframe id="frame3" style="width:600px;height:400px;"></iframe>

</div>

<div id="dialog4" style="display: none;width:700px;" >
    
      
        
         <iframe id="frame4" style="width:600px;height:400px;"></iframe>

</div>
    
    
    
    
    
    
    <!--  
    <footer id="main_footer">
        <p>Â© 2017 Mphasis Unleash the Next. All rights reserved &nbsp; &nbsp; &nbsp;&nbsp; </p>
    </footer>
    -->



<div id="successModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
          
              <!-- Modal content-->
              <div class="modal-content"  style="background-color:white;color:black;">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Transaction successfull with Txid</h4>
                </div>
                <div class="modal-body">
                  <p id="txId">.</p>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                </div>
              </div>
          
            </div>
          </div>



          <div id="waitingModal" class="modal fade" role="dialog">
            <div class="modal-dialog">
          
              <!-- Modal content-->
              <div class="modal-content"  style="background-color:white;color:black;">
                <div class="modal-header">
                  <button type="button" class="close" data-dismiss="modal">&times;</button>
                  <h4 class="modal-title">Processing Request ...</h4>
                </div>
                <div class="modal-body" style="margin-left:40%;">
                 <img src="assets/img/loading.gif" height="100px;"width="100px;"></img>
                </div>
                
              </div>
          
            </div>
          </div>




   <script src="assets/js/ApproveCustomerQuote.js"></script>
</body>
 <script src="assets/js/Properties.js"></script>



  <script>
$(document).ready(function(){
	
	 setTimeout(function(){ 
		 $("#headerDiv").load("Header.html");
	 }, 200);
	 $("#uploadForm2").hide();
	 $("#uploadForm3").hide();
	 $("#loanData").hide();
	 $("#ownerAddress").hide();
	 $("#username").hide();
	 $("#password").hide();
	 $("#tbId").hide();
	 $("#button7").hide();
	 $("#loanIds").hide();
	 

	// $("#infoTable").hide();
	
	// $("#infoTables").hide();
	 
	 
	 
	 
	 
	 
	 
	 
	 
	 
	
	 
	 $("#InterestDetails").click(function(){
		    $("#uploadForm3").show();
		    $("#button7").show();
		    $("#tbId").show();
		    $("#uploadForm2").show();
		});
	 
	 
	 
	 
	 
	 //var bank=localStorage.getItem("banksName");
	// document.getElementById("bankName").innerHTML = "ABC Bank";
        //$("#main_footer").hide();
       // document.getElementById("jumbotron_header").innerHTML = "Welcome To "+"ABC Bank";
       



$("#prequalify").click(function(){
    $("#myModal").modal();
});
/*
$("#UploadIdentityDocuments").click(function(){
	
	// $("#infoTables").show();
	 
	 
});

*/



$("#applyForLoan").click(function(){
    window.location.href="ApplyForLoan.html";
}); 

var walletAddress=localStorage.getItem("walletAddress");
/*
var ipAdd=localStorage.getItem("ipAdd");
var port=localStorage.getItem("port");
*/

var insuranceAddress2=contract();
localStorage.setItem("insuranceAddress2", insuranceAddress2);
var insAdd2=localStorage.getItem("insuranceAddress2");
var ipAdd=ipAddress();

var port=portNo();

var ipAddIpfs=ipfsIpAddress();

localStorage.setItem("ipAdd", ipAdd);
localStorage.setItem("ipAddIpfs", ipAddIpfs);
localStorage.setItem("port", port);

var getUrlParameter = function getUrlParameter(sParam) {
    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
        sURLVariables = sPageURL.split('&'),
        sParameterName,
        i;

    for (i = 0; i < sURLVariables.length; i++) {
        sParameterName = sURLVariables[i].split('=');

        if (sParameterName[0] === sParam) {
            return sParameterName[1] === undefined ? true : sParameterName[1];
        }
    }
};

var loanId = getUrlParameter('loanId');
var walletAddress = getUrlParameter('walletAddress');

$('#premiumAmount').on('blur', function() {

var repPass= $("#premiumAmount").val();

var strRepass = repPass.split('.');
if (strRepass[0].length >= 4) {
	strRepass[0] = strRepass[0].replace(/(\d)(?=(\d{3})+$)/g, '$1,');
}
if (strRepass[1] && strRepass[1].length >= 4) {
	strRepass[1] = strRepass[1].replace(/(\d{3})/g, '$1 ');
}
strRepass.join('.');
$('#premiumAmount').val("$" +strRepass);
});


$('#rate').on('blur', function() {

	var repPass2= $("#rate").val();

	
	$('#rate').val(repPass2 +" %");
	});

$.get("/getCustomerPortfolioInfo?walletAddress="+walletAddress+"&loanId="+loanId, function(response){
	  // alert(JSON.stringify(response.people));
	//alert(JSON.stringify(response));
	
	 document.getElementById("loanId").innerHTML = response.message.loanId;
	 document.getElementById("loanPurpose").innerHTML = response.message.loanPurpose;
	 document.getElementById("loanType").innerHTML = response.message.loanType;
	 document.getElementById("interestType").innerHTML = response.message.interestType;
	 document.getElementById("loanTerm").innerHTML = response.message.loanTerm+" years";
	 document.getElementById("purchasePrice").innerHTML = "$ "+response.message.purchasePrice;
	 
	 document.getElementById("downPayment").innerHTML = "$ "+response.message.downPayment;
	 document.getElementById("propertyType").innerHTML = response.message.propertyType;
	 var ppAdd=response.message.propertyAddress;
	 var ppAdd2=ppAdd.charAt(0).toUpperCase() + ppAdd.slice(1);
	 var replaced2 = ppAdd2.split('_').join(' ');
	 document.getElementById("propertyAddress").innerHTML = replaced2;
	 
	 $("#loanIds").val(loanId);
	 //$("#ownerAddress").val(walletAddress);
	 document.getElementById("loanValue").innerHTML = "$ "+response.message.purchasePrice;
	 document.getElementById("loanDownPaymentValue").innerHTML = "$ "+response.message.downPayment;
	 
	 //document.getElementById("interestRate").innerHTML = "2 %";
	 //document.getElementById("premium").innerHTML = "$ 75";
	 
	 

	 
	 
	 
	 
	 
	 
	 
	
	 
	 
	 
	


});

});




        


</script>
<script type="text/javascript">
    $(document).ready(function() {
    	var ipAdd=localStorage.getItem("ipAdd");
    	var port=localStorage.getItem("port");
    	var ipAddIpfs=localStorage.getItem("ipAddIpfs");

    	
    	
    	var getUrlParameter = function getUrlParameter(sParam) {
    	    var sPageURL = decodeURIComponent(window.location.search.substring(1)),
    	        sURLVariables = sPageURL.split('&'),
    	        sParameterName,
    	        i;

    	    for (i = 0; i < sURLVariables.length; i++) {
    	        sParameterName = sURLVariables[i].split('=');

    	        if (sParameterName[0] === sParam) {
    	            return sParameterName[1] === undefined ? true : sParameterName[1];
    	        }
    	    }
    	};

    	var loanId = getUrlParameter('loanId');
    	var walletAddress = getUrlParameter('walletAddress');
        $('#btnShow').click(function(){
        	$.get("/getCustomerPortfolioInfo?walletAddress="+walletAddress+"&loanId="+loanId, function(response){
        		  // alert(JSON.stringify(response.people));
        		//alert(JSON.stringify(response));
        		
        		 
        		// document.getElementById("propertyAddress").innerHTML = response.message.propertyAddress;
        		
        	
            $("#dialog").dialog({
               
                    maxWidth:600,
                    maxHeight: 450,
                    width: 600,
                    height: 450,
                    modal: true
                    
                });
          //  $("#frame").attr("src", "http://"+ipAddIpfs+":8090/ipfs/"+response.message.ssnHash);  ---------



		 $.get("/ipfs?fileHash=" + response.message.ssnHash, function (response) {
				$("#frame").attr("src", response.ipfsUrl);
			});

        }); 
        });
        
        $('#btnShow2').click(function(){
        	$.get("/getCustomerPortfolioInfo?walletAddress="+walletAddress+"&loanId="+loanId, function(response){
        		  // alert(JSON.stringify(response.people));
        		//alert(JSON.stringify(response));
        		
        		 
        		// document.getElementById("propertyAddress").innerHTML = response.message.propertyAddress;
        		
        	
            $("#dialog2").dialog({
               
                    maxWidth:600,
                    maxHeight: 450,
                    width: 600,
                    height: 450,
                    modal: true
                    
                });
         //   $("#frame2").attr("src", "http://"+ipAddIpfs+":8090/ipfs/"+response.message.passportHash); ----------------


	 $.get("/ipfs?fileHash=" + response.message.passportHash, function (response) {
				$("#frame2").attr("src", response.ipfsUrl);
			});

        }); 
        });
        
        
        $('#btnShow3').click(function(){
        	$.get("/getCustomerPortfolioInfo?walletAddress="+walletAddress+"&loanId="+loanId, function(response){
        		  // alert(JSON.stringify(response.people));
        		//alert(JSON.stringify(response));
        		
        		 
        		// document.getElementById("propertyAddress").innerHTML = response.message.propertyAddress;
        		
        	
            $("#dialog3").dialog({
               
                    maxWidth:600,
                    maxHeight: 450,
                    width: 600,
                    height: 450,
                    modal: true
                    
                });
           // $("#frame3").attr("src", "http://"+ipAddIpfs+":8090/ipfs/"+response.message.taxReturnsHash); ---------


	 $.get("/ipfs?fileHash=" + response.message.taxReturnsHash, function (response) {
				$("#frame3").attr("src", response.ipfsUrl);
			});
	
        }); 
        });
        
        
        
        $('#btnShow4').click(function(){
        	$.get("/getCustomerPortfolioInfo?walletAddress="+walletAddress+"&loanId="+loanId, function(response){
        		  // alert(JSON.stringify(response.people));
        		//alert(JSON.stringify(response));
        		
        		 
        		// document.getElementById("propertyAddress").innerHTML = response.message.propertyAddress;
        		
        	
            $("#dialog4").dialog({
               
                    maxWidth:600,
                    maxHeight: 450,
                    width: 600,
                    height: 450,
                    modal: true
                    
                });
           // $("#frame4").attr("src", "http://"+ipAddIpfs+":8090/ipfs/"+response.message.salaryDetailsHash); ----------


	 $.get("/ipfs?fileHash=" + response.message.salaryDetailsHash, function (response) {
				$("#frame4").attr("src", response.ipfsUrl);
			});


        }); 
        });
    });
</script>




<script>
function goBack() {
    window.history.back();
}
</script>

</html>
